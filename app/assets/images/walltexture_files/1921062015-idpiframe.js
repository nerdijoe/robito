var h,aa=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ba=function(a,b){function c(){}c.prototype=b.prototype;a.Vb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Sb=function(a,c,g){for(var e=Array(arguments.length-2),d=2;d<arguments.length;d++)e[d-2]=arguments[d];return b.prototype[c].apply(a,e)}};var k={},m={},n,ca=!1,q=function(a){try{ca&&window.console&&window.console.log&&window.console.log(a)}catch(b){}},r=function(a,b){if(!a)return-1;if(a.indexOf)return a.indexOf(b,void 0);for(var c=0,e=a.length;c<e;c++)if(a[c]===b)return c;return-1},t=function(a,b){function c(){}if(!a)throw"Child class cannot be empty.";if(!b)throw"Parent class cannot be empty.";c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},da=function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var e=a[c];
if(null===e||void 0===e)e="";b.push(encodeURIComponent(c)+"="+encodeURIComponent(e))}return b.join("&")},ea=function(a){a=(new RegExp("[&#]"+a+"=([^&]*)")).exec(window.location.hash);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},fa=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else throw"Add event handler for "+b+" failed.";},ga=function(a,b){a=(a||"").split(" ");b=(b||"").split(" ");for(var c=0;c<b.length;c++)if(b[c]&&
0>r(a,b[c]))return!1;return!0},ha=function(){if("undefined"!=typeof n)return n;var a;a=window.localStorage?window.localStorage:void 0;if(!a)return n=!1;try{a.setItem("test","test"),a.removeItem("test"),n=!0}catch(b){n=!1}return n},ia=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")&&8==parseInt(a.split("msie")[1],10)},v=function(){return Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject},ja=function(){var a=navigator.userAgent;return!!a&&/Edge\/\d+/.test(a)},
ka=function(){var a=navigator.userAgent,b;if(b=!!a&&-1!=a.indexOf("CriOS"))b=-1,(a=a.match(/CriOS\/(\d+)/))&&a[1]&&(b=parseInt(a[1],10)||-1),b=48>b;return b},la=function(){var a=navigator.userAgent.toLowerCase();return-1<a.indexOf("safari/")&&0>a.indexOf("chrome/")&&0>a.indexOf("crios/")&&0>a.indexOf("android")},w=function(a){this.Wa=a||[];this.F={}};
w.prototype.addEventListener=function(a,b){if(!(0<=r(this.Wa,a)))throw"Unrecognized event type: "+a;if("[object Function]"!==Object.prototype.toString.call(b))throw"The listener for event '"+a+"' is not a function.";this.F[a]||(this.F[a]=[]);0>r(this.F[a],b)&&this.F[a].push(b)};w.prototype.dispatchEvent=function(a){var b=a.type;if(!(b&&0<=r(this.Wa,b)))throw"Failed to dispatch unrecognized event type: "+b;if(this.F[b]&&this.F[b].length)for(var c=0,e=this.F[b].length;c<e;c++)this.F[b][c](a)};
m=m||{};m.H=function(a){a=encodeURIComponent(a);var b=m.Ma();if(b&&(a=b.match("(^|;) ?"+a+"=([^;]*)(;|$)"))&&2<a.length&&(a=a[2]))return decodeURIComponent(a)};m.ob=function(a){var b;(a=m.H(a))&&(b=String(ma(a)));return b};m.Ma=function(){return document.cookie};m.Mb=function(a){document.cookie=a};k=k||{};
k.ub=function(a){if(!0===k.sa)a();else{var b=function(){k.sa=!0;a()};switch(na()){case "sessionStorage":k.ea=new x;k.ea.C();break;case "inMemoryStorage":k.ea=new y;k.ea.C();break;default:throw"Unsupported storage type: "+na();}switch(oa()){case "localStorage":k.O=new z;k.O.C();b();break;case "indexedDb":k.O=new pa;k.O.C(b);break;case "cookieStorage":k.O=new A;k.O.C();b();break;default:throw"Unsupported storage type: "+oa();}}};
k.Oa=function(){if(!k.sa)throw Error("Storages are not initialized yet!");return k.O};k.sb=function(){if(!k.sa)throw Error("Storages are not initialized yet!");return k.ea};var B=function(){};h=B.prototype;h.X=function(){return!0};h.J=function(){throw Error("unimplemented abstract method");};h.getItem=function(a,b){b(this.J(a))};h.setItem=function(){throw Error("unimplemented abstract method");};h.removeItem=function(){throw Error("unimplemented abstract method");};var z=function(){};t(z,B);
z.prototype.C=function(a){this.ba=a||window.localStorage};z.prototype.J=function(a){return this.ba.getItem(a)};z.prototype.setItem=function(a,b,c){void 0===b||null===b?this.ba.removeItem(a):this.ba.setItem(a,b);c&&c()};z.prototype.removeItem=function(a,b){this.ba.removeItem(a);b&&b()};var pa=function(){};h=pa.prototype;h.X=function(){return!1};h.C=function(a){var b=this,c=window.indexedDB.open("oauth");c.onsuccess=function(c){b.na=c.target.result;a()};c.onupgradeneeded=function(a){a.target.result.createObjectStore("oauth")}};
h.getItem=function(a,b){var c=this.na.transaction("oauth","readwrite").objectStore("oauth").get(a);c.onsuccess=function(){b(c.result)}};h.setItem=function(a,b,c){var e=this.na.transaction("oauth","readwrite").objectStore("oauth");if(void 0===b||null===b)e["delete"](a);else e.put(b,a);e.transaction.oncomplete=function(){c&&c()}};h.removeItem=function(a,b){var c=this.na.transaction("oauth","readwrite").objectStore("oauth");c["delete"](a);c.transaction.oncomplete=function(){b&&b()}};var y=function(){};
t(y,B);y.prototype.C=function(){this.za={}};y.prototype.J=function(a){return this.za[a]||null};y.prototype.setItem=function(a,b,c){this.za[a]=b;c&&c()};y.prototype.removeItem=function(a,b){delete this.za[a];b&&b()};var x=function(){};t(x,B);x.prototype.C=function(a){this.da=a||window.sessionStorage};x.prototype.J=function(a){return this.da.getItem(a)};x.prototype.setItem=function(a,b,c){void 0===b||null===b?this.da.removeItem(a):this.da.setItem(a,b);c&&c()};
x.prototype.removeItem=function(a,b){this.da.removeItem(a);b&&b()};var A=function(){};t(A,B);A.prototype.C=function(a){this.zb=a||C.Za};A.prototype.J=function(a){for(var b=qa(a),c=0;c<b.length;c++)if(b[c].key==a)return b[c].value;return null};A.prototype.setItem=function(a,b,c){var e=C.pa(a.split(C.i)[0]);if(e){var d=ra(e);b={key:a,value:b};for(var g=0;g<d.length;g++)if(d[g].key==a){d.splice(g,1);break}d.push(b);sa(this,e,d)}c&&c()};
A.prototype.removeItem=function(a,b){for(var c=qa(a),e=0;e<c.length;e++)if(c[e].key==a){c.splice(e,1);break}(a=C.pa(a.split(C.i)[0]))&&sa(this,a,c);b&&b()};var qa=function(a){return(a=C.pa(a.split(C.i)[0]))?ra(a):[]},ra=function(a){a=m.H(a);return k.hb(a||null)},sa=function(a,b,c){var e=k.jb(c);e.length>a.zb?(c.splice(0,1),0<c.length?sa(a,b,c):q("Failed to write Cookie based cache due to the big size.")):k.Va(b,e)};k.gb=function(a){try{return atob(a)}catch(b){return a}};k.ib=function(a){try{return btoa(a)}catch(b){return a}};
k.hb=function(a){if(!a)return[];a=k.gb(a);try{return JSON.parse(a).items||[]}catch(b){return q("Error while parsing items from cookie:"+b.message),[]}};k.jb=function(a){return k.ib(JSON.stringify({items:a}))};k.Va=function(a,b){var c=window.location.pathname;a=encodeURIComponent(a)+"="+encodeURIComponent(b)+"; domain="+window.location.hostname+";";-1!=navigator.userAgent.toLowerCase().indexOf("msie")||v()||(a+=" path="+c+";");"https:"==window.location.protocol&&(a+=" secure;");m.Mb(a)};
k.Ub=function(a){var b=m.Ma();if(b)for(var b=b.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),c=0;c<b.length;c++){var e=decodeURIComponent(b[c]);0==e.indexOf(a)&&k.Va(e,"")}};var D=function(a){this.Ra=a;w.call(this,["storageValueChanged"])};t(D,w);var ta=function(a,b){k.Oa().getItem(a.Ra,b)};D.prototype.addListener=function(a){this.addEventListener("storageValueChanged",a)};
D.prototype.start=function(){var a=this;ta(this,function(b){a.Db=b;a.Sa=0;a.ta=window.setInterval(ua(a),200)})};D.prototype.stop=function(){void 0!==this.ta&&(clearInterval(this.ta),this.ta=void 0)};
var ua=function(a){return function(){a.Sa++;ta(a,function(b){b!=a.Db?(a.dispatchEvent({type:"storageValueChanged",key:a.Ra,newValue:b}),a.stop()):1500<=a.Sa&&a.stop()})}},ma=function(a){var b=0,c,e,d;if(a)for(c=0,d=a.length;c<d;c++)e=a.charCodeAt(c),b=(b<<5)-b+e,b|=0;return b},E=function(a){return!!a&&0<=a.indexOf(C.i)},va=function(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;a=a.extraQueryParams;b=b.extraQueryParams;if(!a&&!b)return!0;if(!a||!b||Object.keys&&Object.keys(a).length!=Object.keys(b).length)return!1;
for(var c in a)if(a[c]!==b[c])return!1;if(!Object.keys)for(c in b)if(a[c]!==b[c])return!1;return!0},C=C||{};C.ja="SID";C.Ha="SSID";C.Ya=100;C.Ja="/oauth2/sessionstate/action/updateState";C.Ca="/oauth2/sessionstate/action/checkOrigin";C.Ga="/oauth2/permission/action/refresh";C.ia="/oauth2/permission/action/listSessions";C.bb="/o/oauth2/revoke";C.i="::";C.ha="_ss_";C.Fa="_tr_";C.U="oauth2_ss";C.Da="oauth2_cs";C.Ia="oauth2_tr";C.$a="oauth2_is";C.T="oauth2_ar";C.Ea="oauth2c_";C.Za=1500;
C.Rb=function(){var a={ha:1,Fa:2,U:3,Da:4,Ia:5,T:6},b;for(b in a)if(a=C[b],!a||0<=a.indexOf(C.i))throw"Invalid value for 'oauth2.spi."+b+"'.";};C.Rb();C.ab=512;C.cb=function(a){var b;(b=void 0===a.hint)||(b=a.hint,b=(""===b?!0:b?"string"==typeof b||"object"==typeof b&&b.constructor===String:!1)&&a.hint.length<=C.ab);return!a.id&&b};C.qb=function(){return"https:"==window.location.protocol?C.Ha:C.ja};C.pa=function(a){switch(a){case C.T:return C.Ea+C.T;case C.U:return C.Ea+C.U;default:return null}};
var oa=function(){return la()&&!ha()?"cookieStorage":v()||ja()?"indexedDb":"localStorage"},na=function(){return la()&&!ha()?"inMemoryStorage":"sessionStorage"},m=m||{};m.ga="cookieValueChanged";var wa=function(a,b){this.La=a;this.vb=b;w.call(this,[m.ga])};t(wa,w);wa.prototype.H=function(){return m.H(this.La)};var F=function(a){return m.ob(a.La)};wa.prototype.addListener=function(a){this.addEventListener(m.ga,a)};
var ya=function(a){void 0!==a.Aa&&(window.clearInterval(a.Aa),a.Aa=void 0,q("IDP Session Cookie monitor is stoped."));a.ca=a.H();a.Aa=window.setInterval(xa(a),a.vb);q("IDP Session Cookie monitor is started.")},xa=function(a){return function(){var b=a.H();if(a.ca!=b){var c={type:m.ga,newHash:b&&ma(b),oldHash:a.ca&&ma(a.ca)};a.ca=b;a.dispatchEvent(c)}}},za=function(a,b){this.b=a;this.Xa=b},Aa=function(a,b,c){var e=C.bb,d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var a;
d.responseText&&(a=window.JSON.parse(d.responseText));c(a)}};d.open("POST",e,!0);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g="xsrfToken=";a.Xa&&(g+=a.Xa);if(b)for(var f in b)f&&b[f]&&(g+="&"+f+"="+encodeURIComponent(b[f]));q("Call "+e+" with postData: "+g);d.send(g)},G=function(a,b,c,e,d){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){var a;g.responseText&&(a=window.JSON.parse(g.responseText));e(a)}};if(b=da(b))a+=0>a.indexOf("?")?
"?":"&",a+=b;g.open("GET",a,!0);d&&(g.withCredentials=!0);if(c)for(var f in c)if(c.hasOwnProperty(f)){d=c[f];if(null===d||void 0===d)d="";g.setRequestHeader(f,d)}q("Call "+a+" with Get method.");g.send()},Ba=function(a,b,c){G(C.Ca,{origin:a.b,client_id:b},null,c,!1)},Ca=function(a,b,c){b&&b.length?G(C.Ja,{login_hint:b.join(" "),origin:a.b},null,c,!1):c({activeHints:{}})},Da=function(a,b,c){b.origin=a.b;delete b.redirect_uri;delete b.app_package_name;G(C.Ga,b,null,c,!1)},Ea=function(a,b,c){b.origin=
a.b;b.redirect_uri=void 0;b.response_type=void 0;b.app_package_name=void 0;G(C.ia,b,null,c,!1)},Fa=function(a,b,c){Aa(a,{token:b},c)},k=k||{},Ga=function(){};Ga.prototype.w=function(){return!1};var Ha={};k.Fb=function(){var a=new H;if(!a)throw"policy cannot be empty.";if(k.Pa("DEFAULT"))throw"Duplicate policyName [DEFAULT].";Ha.DEFAULT=a};k.Pa=function(a){for(var b in Ha)if(a==b)return!0;return!1};k.Na=function(a){return a&&k.Pa(a)?a:"DEFAULT"};k.pb=function(a){return Ha[k.Na(a)]};
k.w=function(a,b,c,e){return k.pb(e).w(a,b,c)};k.Tb=function(a,b,c,e){if(!k.w(a,b,c,e))throw"permission_error";};var Ia=function(){};t(Ia,Ga);Ia.prototype.w=function(a,b,c){a=c?this.qa(a):this.ra(a);return 0<=r(a,b)};Ia.prototype.ra=function(a){var b=[];if(a&&(b.push(a),"http://"==a.substring(0,7)||"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;a!=c.protocol+"//"+c.hostname&&b.push(c.protocol+"//"+c.hostname);"https:"==c.protocol&&b.push("http://"+c.hostname)}return b};
Ia.prototype.qa=function(a){var b=[];if(a){b.push(a);var c=document.createElement("a");c.href=a;if("http:"==c.protocol||"https:"==c.protocol)for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift()}return b};var H=function(){};t(H,Ga);H.prototype.w=function(a,b,c){a=c?this.qa(a):this.ra(a);return 0<=r(a,b)};
H.prototype.ra=function(a){var b=[];if(a&&(b.push(a),"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;""!=c.port&&0!=c.port&&443!=c.port||b.push("http://"+c.hostname)}return b};
H.prototype.qa=function(a){var b=[];if(a){var c=document.createElement("a");c.href=a;if("https:"==c.protocol&&(""==c.port||0==c.port||443==c.port)||"http:"==c.protocol&&(""==c.port||0==c.port||80==c.port))for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift();else b.push(a)}return b};k.Fb();var Ja=function(){};Ja.prototype.va=function(){return!0};var I=function(a){return a.va()?k.sb():k.Oa()};h=Ja.prototype;
h.g=function(){throw Error("unimplemented abstract method");};h.G=function(){throw Error("unimplemented abstract method");};h.m=function(){throw Error("unimplemented abstract method");};h.ka=function(){throw Error("unimplemented abstract method");};h.l=function(){throw Error("unimplemented abstract method");};h.la=function(){throw Error("unimplemented abstract method");};var J=function(){};t(J,Ja);
J.prototype.m=function(a,b){if(!I(this).X())throw Error("The sync version getValue() can only be used by synchronous storage.");var c;a=this.g(a);var e=I(this).J(a);if(e)try{var d=window.JSON.parse(e);d.cookieHash!=b?I(this).removeItem(a):c=d&&d.cachedValue}catch(g){}return c};J.prototype.ka=function(a,b,c){var e=this,d=this.g(a);I(this).getItem(d,function(a){var f;if(a)try{var g=window.JSON.parse(a);if(g.cookieHash!=b){I(e).removeItem(d,function(){c(void 0)});return}f=g&&g.cachedValue}catch(p){}c(f)})};
J.prototype.l=function(a,b,c){if(!I(this).X())throw Error("The sync version setValue() can only be used by synchronous storage.");a=this.g(a);void 0===b||null===b?I(this).removeItem(a):I(this).setItem(a,JSON.stringify({cookieHash:c,cachedValue:b}))};J.prototype.la=function(a,b,c,e){a=this.g(a);void 0===b||null===b?I(this).removeItem(a,e):(b=JSON.stringify({cookieHash:c,cachedValue:b}),I(this).setItem(a,b,e))};var K=function(){};t(K,Ja);
K.prototype.m=function(a){if(!I(this).X())throw Error("The sync version getValue() can only be used by synchronous storage.");var b;if(a=I(this).J(this.g(a)))try{var c=window.JSON.parse(a);b=c&&c.cachedValue}catch(e){}return b};K.prototype.ka=function(a,b,c){I(this).getItem(this.g(a),function(a){var b;if(a)try{var e=window.JSON.parse(a);b=e&&e.cachedValue}catch(f){}c(b)})};
K.prototype.l=function(a,b){if(!I(this).X())throw Error("The sync version setValue() can only be used by synchronous storage.");a=this.g(a);void 0===b||null===b?I(this).removeItem(a):I(this).setItem(a,JSON.stringify({cachedValue:b}))};K.prototype.la=function(a,b,c,e){a=this.g(a);void 0===b||null===b?I(this).removeItem(a,e):(b=JSON.stringify({cachedValue:b}),I(this).setItem(a,b,e))};var L=function(){};t(L,K);L.prototype.va=function(){return!1};L.prototype.g=function(a){return[C.T,a.origin,a.a,a.id].join(C.i)};
L.prototype.G=function(a){var b={};a&&(a=a.split(C.i),4==a.length&&(b.origin=a[1],b.a=a[2],b.id=a[3]));return b};var Ka=function(){};t(Ka,J);Ka.prototype.g=function(a){return[C.Da,a.origin,a.a].join(C.i)};Ka.prototype.G=function(a){a=a.split(C.i);var b={};3==a.length&&(b.origin=a[1],b.a=a[2]);return b};var M=function(){};t(M,J);M.prototype.g=function(a){return[C.$a,a.origin,a.a].join(C.i)};
M.prototype.m=function(a,b){var c;(b=J.prototype.m.call(this,a,b))&&b.expires_at&&(6E4>b.expires_at-(new Date).getTime()?I(this).removeItem(this.g(a)):ga(b.scope,a.scope)&&ga(a.scope,b.scope)?(c=b,c.expires_in=Math.floor((c.expires_at-(new Date).getTime())/1E3)):I(this).removeItem(this.g(a)));return c};M.prototype.l=function(a,b,c){var e;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(e=b);J.prototype.l.call(this,a,e,c)};var N=function(){};t(N,K);N.prototype.va=function(){return!1};
N.prototype.g=function(a){return[C.U,a.domain,a.W?"1":"0",k.Na(a.I),a.id||C.ha].join(C.i)};N.prototype.G=function(a){a=a.split(C.i);var b={};5==a.length&&(b.domain=a[1],b.W="1"==a[2],b.I=a[3],b.id=a[4]);"DEFAULT"==b.I&&delete b.I;b.id==C.ha&&delete b.id;return b};var O=function(a){this.Cb=a||C.Ia};t(O,J);O.prototype.g=function(a){return[this.Cb,a.origin,a.a,a.id||C.Fa].join(C.i)};
O.prototype.m=function(a,b){if((b=J.prototype.m.call(this,a,b))&&b.R&&b.R.expires_at){if(a.yb==b.R.login_hint&&!(6E4>b.R.expires_at-(new Date).getTime())&&ga(b.R.scope,a.scope)&&ga(b.responseType,a.responseType))return a=b.R,a.expires_in=Math.floor((a.expires_at-(new Date).getTime())/1E3),a;I(this).removeItem(this.g(a))}};O.prototype.l=function(a,b,c){var e;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(e={R:b,responseType:a.responseType});J.prototype.l.call(this,a,e,c)};
var La=function(a,b){this.b=a;this.xa=b;this.$={};this.Z={}},Ma=function(a,b){if(!b)throw"message object cannot be null.";b.rpcToken=a.xa;b=JSON.stringify(b);q("IDP IFrame sends message: "+b);window.parent.postMessage(b,a.b)},P=function(a,b,c){b&&Ma(a,{id:b,result:c})};
La.prototype.Eb=function(a){if(a.source==window.parent&&a.origin==this.b){q("IDP Session State IFrame receive message:"+a.data);try{var b=window.JSON.parse(a.data)}catch(c){return}(b.rpcToken||this.xa)&&b.rpcToken!=this.xa?q("RPC token mismatch."):b&&b.method&&this.$[b.method]?(a=this.$[b.method],a.rpcIdRequired&&!b.id?q("Bad request."):a.validator&&!a.validator(b)?(q("Bad request."),Ma(this,{id:b.id,error:"bad_request"})):a.handler(b)):q("Bad request.")}};
var Q=function(a,b){if(b&&b.type&&a.Z[b.type]){var c=a.Z[b.type].filter;c&&!c(b)||Ma(a,{method:"fireIdpEvent",params:b})}else q("Invalid event type.")},Na=function(a,b){a.$={};a.Z={};if(b){if(b.rpcs)for(var c=0;c<b.rpcs.length;c++){var e=b.rpcs[c];if(!e.method||!e.handler)throw"Error in RPC policy: method or handler is empty.";if(a.$[e.method])throw"Error in RPC policy: duplicate entry for RPC '"+e.method+"'.";a.$[e.method]={handler:e.handler,rpcIdRequired:e.rpcIdRequired,validator:e.validator}}if(b.events)for(c=
0;c<b.events.length;c++){e=b.events[c];if(!e.type)throw"Error in Event policy: type is empty.";if(a.Z[e.type])throw"Error in Event policy: duplicate entry for type '"+e.type+"'.";a.Z[e.type]={filter:e.filter}}}},Oa=function(a,b,c,e){Q(a,{type:"sessionStateChanged",clientId:b,user:c,sessionState:e})},Pa=function(a){var b=new N,c=C.U+C.i;return function(e){if(e.key&&0===e.key.indexOf(c)){var d=b.G(e.key);if(k.w(a.b,d.domain,d.W,d.I)){var g;if(e.newValue)try{var f=JSON.parse(e.newValue);f&&(g=f.cachedValue)}catch(l){return}Q(a,
{type:"sessionSelectorChanged",newValue:g,crossSubDomains:d.W,domain:d.domain,policy:d.I,id:d.id})}}}},Qa=function(a){var b=new L,c=[C.T,a.b].join(C.i)+C.i;return function(e){if(!e.key&&ia()){var d,g=null,f=[];for(e=0;e<window.localStorage.length;e++){var l=window.localStorage.key(e);if(0===l.indexOf(c))if(g)f.push(l);else{var p=window.localStorage.getItem(l);f.push(l);if(p){try{d=window.JSON.parse(p)}catch(u){continue}d&&d.cachedValue&&(g=b.G(l),g={type:"authResult",clientId:g.a,id:g.id,authResult:d.cachedValue})}}}for(e=
0;e<f.length;e++)window.localStorage.removeItem(f[e]);(d=g)&&Q(a,d)}else if(e.key&&0===e.key.indexOf(c)&&e.newValue){try{f=window.JSON.parse(e.newValue)}catch(u){return}f&&f.cachedValue&&(d=b.G(e.key),d={type:"authResult",clientId:d.a,id:d.id,authResult:f.cachedValue},Q(a,d))}}},Ra=function(a,b){this.b=a;this.v=b;this.Ka=new Ka;this.Ta=new N;this.Ba=new O;this.N=new M},Sa=function(a,b,c,e){a.Ka.l({origin:a.b,a:b},{user:c.B,session:c.B?c.K:void 0},e)},Ta=function(a,b){return a.Ka.m({origin:a.b,a:b},
F(a.v))},Ua=function(a,b,c,e,d,g){return a.Ba.m({yb:b,origin:a.b,a:c,responseType:e,scope:d,id:g},F(a.v))},Va=function(a,b,c,e,d,g){if(!a.w(b,c,d))throw"Permission denied for '"+a.b+"' to read session selector for domain '"+b+"'.";a.Ta.ka({domain:b,W:c,I:d,id:e},void 0,function(a){g(a)})},Wa=function(a,b,c,e,d,g,f){if(!a.w(b,c,g))throw"Permission denied for '"+a.b+"' to write session selector for domain '"+b+"'.";a.Ta.la({domain:b,W:c,I:g,id:d},e,void 0,f)};
Ra.prototype.w=function(a,b,c){return k.w(this.b,a,b,c)};
var Xa=function(a,b,c){return a.N.m({origin:a.b,a:b,scope:c},F(a.v))},Ya=function(a,b,c){this.M=a;this.c=b;this.h=c},Za=function(a,b,c){a.B?c&&void 0!==c[a.B]?(c=c[a.B],va(a.K,c)||(a.K=c,Sa(a.h,a.M,a,b),Oa(a.c,a.M,a.B,a.K))):a.K&&(a.K=void 0,Sa(a.h,a.M,a,b),Oa(a.c,a.M,a.B,void 0)):b&&Oa(a.c,a.M,a.B,void 0)},ab=function(a,b,c,e){this.v=a;this.c=b;this.f=c;this.h=e;this.Y=void 0;this.u={};this.ya=[];var d=this;this.v.addListener(function(a){$a(d,a)})},bb=function(a){var b=[],c;for(c in a.u){var e=a.u[c].B;
e&&b.push(e)}return b},$a=function(a,b){if(b.newHash)Ca(a.f,bb(a),function(c){for(var d in a.u)Za(a.u[d],b.newHash,c&&c.activeHints)});else for(var c in a.u)Za(a.u[c],b.newHash,void 0)},cb=function(a,b,c,e){var d=a.u[b];d||(d=new Ya(b,a.c,a.h),a.u[b]=d);a=d;b=c.login_hint;c=c.session_state;a.B!=b&&(a.B=b,a.K=b?c:void 0,Sa(a.h,a.M,a,e))},db=function(a,b,c){var e=a.u[b];if(e)c(!0);else{var d=Ta(a.h,b);d?(e=new Ya(b,a.c,a.h),a.u[b]=e,e.B=d.user,e.K=d.session,c(!0)):Ba(a.f,b,function(d){d&&d.valid?(d=
new Ya(b,a.c,a.h),a.u[b]=d,Sa(a.h,b,d,F(a.v)),c(!0)):c(!1)})}},eb=function(a,b){v()||ja()||ka()?a.ya.push(b):fa(ia()?document:window,"storage",b)},S=function(a,b,c){this.b=a;this.c=new La(a,b);this.v=new wa(C.ja,C.Ya);this.f=new za(a,c);this.h=new Ra(a,this.v);this.D=new ab(this.v,this.c,this.f,this.h)};h=S.prototype;
h.start=function(){Na(this.c,this.ma());var a=this;fa(window,"message",function(){a.c.Eb.apply(a.c,arguments)});eb(this.D,Pa(this.c));eb(this.D,Qa(this.c));ya(this.v);k.ub(function(){Q(a.c,{type:"idpReady"});q("Initialize IDP IFrame successfully.")})};h.Ab=function(a){var b=this;db(this.D,(a.params||{}).clientId,function(c){P(b.c,a.id,c)})};
h.lb=function(a){var b=a.params||{},c=this,e=b.clientId,d=b.loginHint,g=b.request,f=b.sessionSelector;g.client_id=e;g.login_hint=d;g.ss_domain=f.domain;var l=F(this.v);if(l){if(!b.forceRefresh&&(d=Ua(this.h,d,e,g.response_type,g.scope,b.id))&&18E4<d.expires_at-(new Date).getTime()){cb(this.D,e,d,l);P(c.c,a.id,d);return}Da(this.f,g,function(d){if(d&&!d.error&&d.login_hint){d.first_issued_at=(new Date).getTime();d.expires_at=d.first_issued_at+1E3*d.expires_in;d.session_state||(d.session_state={});d.scope||
(d.scope=g.scope);if(!b.skipCache){var f=c.h;f.Ba.l({origin:f.b,a:e,responseType:g.response_type,id:b.id},d,l)}cb(c.D,e,d,l)}d=d||{};P(c.c,a.id,d)})}else P(c.c,a.id,{error:"user_logged_out"})};h.Gb=function(a){var b=a.params||{},c=b.clientId,e=this;Fa(this.f,b.token,function(b){var d=e.h,f=d.Ba,d={origin:d.b,a:c};I(f).removeItem(f.g(d));P(e.c,a.id,b)})};
h.Pb=function(a){if(v()||ja()||ka()){var b=a.params||{},c=(new L).g({a:b.clientId,id:b.id,origin:b.origin}),b=this.D;if(v()||ja()||ka()){b.Y&&b.Y.stop();b.Y=new D(c);for(c=0;c<b.ya.length;c++)b.Y.addListener(b.ya[c]);b.Y.start()}}P(this.c,a.id,!0)};h.kb=function(a){var b=this,c=a.params||{};Va(this.h,c.domain,c.crossSubDomains,c.id,c.policy,function(c){P(b.c,a.id,c)})};
h.Nb=function(a){var b=a.params||{},c=b.hint,e=!!b.disabled,d=b.domain,g=b.crossSubDomains,f=b.id,l=b.policy,p=this,u;if(c||e)u={hint:c,disabled:e};Wa(this.h,d,g,u,f,l,function(){Q(p.c,{type:"sessionSelectorChanged",newValue:u,domain:d,crossSubDomains:g,id:f,policy:l});P(p.c,a.id,!0)})};
h.wb=function(a){var b=a.params||{},c=this,e=function(b){P(c.c,a.id,b)},d=b.clientId,g=b.request,f=b.sessionSelector;g.client_id=d;g.response_type="id_token";g.ss_domain=f.domain;var l=F(this.v);if(l){if(!b.forceRefresh&&(b=Xa(this.h,d,g.scope))){e(b);return}Ea(this.f,g,function(a){if(a&&!a.error){a.first_issued_at=(new Date).getTime();a.expires_at=a.first_issued_at+1E3*a.expires_in;a.scope=g.scope;var b=c.h;b.N.l({origin:b.b,a:d},a,l)}a=a||{error:"No response returned from Server."};e(a)})}else e({scope:g.scope,
sessions:[]})};h.Bb=function(a){a=a&&a.params||{};return a.clientId&&!E(a.clientId)};h.tb=function(a){var b=a&&a.params||{};a=b.loginHint;var c=!E(b.id),e=b.clientId&&!E(b.clientId),d=!!b.request,g=d&&b.request.scope;(b=(d=d&&b.request.response_type)&&0<=b.request.response_type.indexOf("code"))&&q("Bad request: 'code' response_type is not supported.");return a&&c&&e&&g&&d&&!b};
h.rb=function(a){a=a&&a.params||{};var b=a.domain&&!E(a.domain),c=!E(a.policy);return!E(a.id)&&b&&c&&this.h.w(a.domain,!!a.crossSubDomains,a.policy)};h.Ob=function(a){a=a&&a.params||{};var b=a.domain&&!E(a.domain),c=!E(a.policy);return!E(a.id)&&b&&c&&this.h.w(a.domain,!!a.crossSubDomains,a.policy)&&C.cb(a)};h.xb=function(a){a=a&&a.params||{};var b=a.clientId&&!E(a.clientId),c=!!a.request&&a.request.scope;return!E(a.id)&&b&&c};
h.Jb=function(a){a=a&&a.params||{};var b=!!a.token,c=a.clientId&&!E(a.clientId);return!E(a.id)&&b&&c};h.Qb=function(a){a=a&&a.params||{};var b=a.origin&&!E(a.origin),c=a.id&&!E(a.id);return a.clientId&&!E(a.clientId)&&b&&c};h.Lb=function(a){var b;if(b=a.clientId)a=a.clientId,b=!(!a||!this.D.u[a]);return b};h.eb=function(a){var b;if(b=a.clientId)b=a.clientId,b=!(!b||!this.D.u[b]);return b&&a.id&&a.authResult};h.Kb=function(a){return a.domain&&this.h.w(a.domain,a.crossSubDomains,a.policy)};
var T=function(a,b){return function(){return b.apply(a,arguments)}};S.prototype.ma=function(){var a={rpcs:[],events:[]};fb(this,a);return a};
var fb=function(a,b){b.rpcs.push({method:"monitorClient",handler:T(a,a.Ab),rpcIdRequired:!1,validator:T(a,a.Bb)});b.rpcs.push({method:"getTokenResponse",handler:T(a,a.lb),rpcIdRequired:!0,validator:T(a,a.tb)});b.rpcs.push({method:"getSessionSelector",handler:T(a,a.kb),rpcIdRequired:!0,validator:T(a,a.rb)});b.rpcs.push({method:"setSessionSelector",handler:T(a,a.Nb),rpcIdRequired:!1,validator:T(a,a.Ob)});b.rpcs.push({method:"listIdpSessions",handler:T(a,a.wb),rpcIdRequired:!0,validator:T(a,a.xb)});
b.rpcs.push({method:"revoke",handler:T(a,a.Gb),validator:T(a,a.Jb)});b.rpcs.push({method:"startPolling",handler:T(a,a.Pb),validator:T(a,a.Qb)});b.events.push({type:"idpReady"});b.events.push({type:"sessionStateChanged",filter:T(a,a.Lb)});b.events.push({type:"sessionSelectorChanged",filter:T(a,a.Kb)});b.events.push({type:"authResult",filter:T(a,a.eb)})};var gb=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,gb);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};ba(gb,Error);var hb=function(a,b){for(var c=a.split("%s"),e="",d=Array.prototype.slice.call(arguments,1);d.length&&1<c.length;)e+=c.shift()+d.shift();return e+c.join("%s")};var ib=function(a,b){b.unshift(a);gb.call(this,hb.apply(null,b));b.shift()};ba(ib,gb);var jb=function(a,b,c){if(!a){var e="Assertion failed";if(b)var e=e+(": "+b),d=Array.prototype.slice.call(arguments,2);throw new ib(""+e,d||[]);}};var kb=function(a){for(var b=[],c=0,e=0;e<a.length;e++){for(var d=a.charCodeAt(e);255<d;)b[c++]=d&255,d>>=8;b[c++]=d}return b};var lb=null;var mb=function(){this.s=-1};var U=function(a,b,c){this.s=-1;this.A=a;this.s=c||a.s||16;this.Qa=Array(this.s);this.wa=Array(this.s);a=b;a.length>this.s&&(this.A.update(a),a=this.A.digest(),this.A.reset());for(c=0;c<this.s;c++)b=c<a.length?a[c]:0,this.Qa[c]=b^92,this.wa[c]=b^54;this.A.update(this.wa)};ba(U,mb);U.prototype.reset=function(){this.A.reset();this.A.update(this.wa)};U.prototype.update=function(a,b){this.A.update(a,b)};
U.prototype.digest=function(){var a=this.A.digest();this.A.reset();this.A.update(this.Qa);this.A.update(a);return this.A.digest()};var V=function(){this.s=64;this.j=Array(4);this.fb=Array(this.s);this.fa=this.V=0;this.reset()};ba(V,mb);V.prototype.reset=function(){this.j[0]=1732584193;this.j[1]=4023233417;this.j[2]=2562383102;this.j[3]=271733878;this.fa=this.V=0};
var nb=function(a,b,c){c||(c=0);var e=Array(16);if("string"==typeof b)for(var d=0;16>d;++d)e[d]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(d=0;16>d;++d)e[d]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.j[0];c=a.j[1];var d=a.j[2],g=a.j[3],f;f=b+(g^c&(d^g))+e[0]+3614090360&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(d^b&(c^d))+e[1]+3905402710&4294967295;g=b+(f<<12&4294967295|f>>>20);f=d+(c^g&(b^c))+e[2]+606105819&4294967295;d=g+(f<<17&4294967295|f>>>15);
f=c+(b^d&(g^b))+e[3]+3250441966&4294967295;c=d+(f<<22&4294967295|f>>>10);f=b+(g^c&(d^g))+e[4]+4118548399&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(d^b&(c^d))+e[5]+1200080426&4294967295;g=b+(f<<12&4294967295|f>>>20);f=d+(c^g&(b^c))+e[6]+2821735955&4294967295;d=g+(f<<17&4294967295|f>>>15);f=c+(b^d&(g^b))+e[7]+4249261313&4294967295;c=d+(f<<22&4294967295|f>>>10);f=b+(g^c&(d^g))+e[8]+1770035416&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(d^b&(c^d))+e[9]+2336552879&4294967295;g=b+(f<<12&4294967295|
f>>>20);f=d+(c^g&(b^c))+e[10]+4294925233&4294967295;d=g+(f<<17&4294967295|f>>>15);f=c+(b^d&(g^b))+e[11]+2304563134&4294967295;c=d+(f<<22&4294967295|f>>>10);f=b+(g^c&(d^g))+e[12]+1804603682&4294967295;b=c+(f<<7&4294967295|f>>>25);f=g+(d^b&(c^d))+e[13]+4254626195&4294967295;g=b+(f<<12&4294967295|f>>>20);f=d+(c^g&(b^c))+e[14]+2792965006&4294967295;d=g+(f<<17&4294967295|f>>>15);f=c+(b^d&(g^b))+e[15]+1236535329&4294967295;c=d+(f<<22&4294967295|f>>>10);f=b+(d^g&(c^d))+e[1]+4129170786&4294967295;b=c+(f<<
5&4294967295|f>>>27);f=g+(c^d&(b^c))+e[6]+3225465664&4294967295;g=b+(f<<9&4294967295|f>>>23);f=d+(b^c&(g^b))+e[11]+643717713&4294967295;d=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(d^g))+e[0]+3921069994&4294967295;c=d+(f<<20&4294967295|f>>>12);f=b+(d^g&(c^d))+e[5]+3593408605&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^d&(b^c))+e[10]+38016083&4294967295;g=b+(f<<9&4294967295|f>>>23);f=d+(b^c&(g^b))+e[15]+3634488961&4294967295;d=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(d^g))+e[4]+3889429448&4294967295;c=
d+(f<<20&4294967295|f>>>12);f=b+(d^g&(c^d))+e[9]+568446438&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^d&(b^c))+e[14]+3275163606&4294967295;g=b+(f<<9&4294967295|f>>>23);f=d+(b^c&(g^b))+e[3]+4107603335&4294967295;d=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(d^g))+e[8]+1163531501&4294967295;c=d+(f<<20&4294967295|f>>>12);f=b+(d^g&(c^d))+e[13]+2850285829&4294967295;b=c+(f<<5&4294967295|f>>>27);f=g+(c^d&(b^c))+e[2]+4243563512&4294967295;g=b+(f<<9&4294967295|f>>>23);f=d+(b^c&(g^b))+e[7]+1735328473&4294967295;
d=g+(f<<14&4294967295|f>>>18);f=c+(g^b&(d^g))+e[12]+2368359562&4294967295;c=d+(f<<20&4294967295|f>>>12);f=b+(c^d^g)+e[5]+4294588738&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^d)+e[8]+2272392833&4294967295;g=b+(f<<11&4294967295|f>>>21);f=d+(g^b^c)+e[11]+1839030562&4294967295;d=g+(f<<16&4294967295|f>>>16);f=c+(d^g^b)+e[14]+4259657740&4294967295;c=d+(f<<23&4294967295|f>>>9);f=b+(c^d^g)+e[1]+2763975236&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^d)+e[4]+1272893353&4294967295;g=b+(f<<11&4294967295|
f>>>21);f=d+(g^b^c)+e[7]+4139469664&4294967295;d=g+(f<<16&4294967295|f>>>16);f=c+(d^g^b)+e[10]+3200236656&4294967295;c=d+(f<<23&4294967295|f>>>9);f=b+(c^d^g)+e[13]+681279174&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^d)+e[0]+3936430074&4294967295;g=b+(f<<11&4294967295|f>>>21);f=d+(g^b^c)+e[3]+3572445317&4294967295;d=g+(f<<16&4294967295|f>>>16);f=c+(d^g^b)+e[6]+76029189&4294967295;c=d+(f<<23&4294967295|f>>>9);f=b+(c^d^g)+e[9]+3654602809&4294967295;b=c+(f<<4&4294967295|f>>>28);f=g+(b^c^d)+e[12]+
3873151461&4294967295;g=b+(f<<11&4294967295|f>>>21);f=d+(g^b^c)+e[15]+530742520&4294967295;d=g+(f<<16&4294967295|f>>>16);f=c+(d^g^b)+e[2]+3299628645&4294967295;c=d+(f<<23&4294967295|f>>>9);f=b+(d^(c|~g))+e[0]+4096336452&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~d))+e[7]+1126891415&4294967295;g=b+(f<<10&4294967295|f>>>22);f=d+(b^(g|~c))+e[14]+2878612391&4294967295;d=g+(f<<15&4294967295|f>>>17);f=c+(g^(d|~b))+e[5]+4237533241&4294967295;c=d+(f<<21&4294967295|f>>>11);f=b+(d^(c|~g))+e[12]+1700485571&
4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~d))+e[3]+2399980690&4294967295;g=b+(f<<10&4294967295|f>>>22);f=d+(b^(g|~c))+e[10]+4293915773&4294967295;d=g+(f<<15&4294967295|f>>>17);f=c+(g^(d|~b))+e[1]+2240044497&4294967295;c=d+(f<<21&4294967295|f>>>11);f=b+(d^(c|~g))+e[8]+1873313359&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~d))+e[15]+4264355552&4294967295;g=b+(f<<10&4294967295|f>>>22);f=d+(b^(g|~c))+e[6]+2734768916&4294967295;d=g+(f<<15&4294967295|f>>>17);f=c+(g^(d|~b))+e[13]+1309151649&
4294967295;c=d+(f<<21&4294967295|f>>>11);f=b+(d^(c|~g))+e[4]+4149444226&4294967295;b=c+(f<<6&4294967295|f>>>26);f=g+(c^(b|~d))+e[11]+3174756917&4294967295;g=b+(f<<10&4294967295|f>>>22);f=d+(b^(g|~c))+e[2]+718787259&4294967295;d=g+(f<<15&4294967295|f>>>17);f=c+(g^(d|~b))+e[9]+3951481745&4294967295;a.j[0]=a.j[0]+b&4294967295;a.j[1]=a.j[1]+(d+(f<<21&4294967295|f>>>11))&4294967295;a.j[2]=a.j[2]+d&4294967295;a.j[3]=a.j[3]+g&4294967295};
V.prototype.update=function(a,b){void 0===b&&(b=a.length);for(var c=b-this.s,e=this.fb,d=this.V,g=0;g<b;){if(0==d)for(;g<=c;)nb(this,a,g),g+=this.s;if("string"==typeof a)for(;g<b;){if(e[d++]=a.charCodeAt(g++),d==this.s){nb(this,e);d=0;break}}else for(;g<b;)if(e[d++]=a[g++],d==this.s){nb(this,e);d=0;break}}this.V=d;this.fa+=b};
V.prototype.digest=function(){var a=Array((56>this.V?this.s:2*this.s)-this.V);a[0]=128;for(var b=1;b<a.length-8;++b)a[b]=0;for(var c=8*this.fa,b=a.length-8;b<a.length;++b)a[b]=c&255,c/=256;this.update(a);a=Array(16);for(b=c=0;4>b;++b)for(var e=0;32>e;e+=8)a[c++]=this.j[b]>>>e&255;return a};var pb=function(a,b,c){b.origin=a.b;b.privileged=!0;b.redirect_uri=void 0;b.response_type=void 0;G(C.ia,b,ob(a),c,!1)},qb=function(a,b,c,e){G((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webauth",{origin:a.b,client_id:b,user_ids:c.join(";")},ob(a),e,!0)},rb=function(a,b,c){G("/o/oauth2/auth",{origin:a.b,client_id:b.client_id,login_hint:b.login_hint,response_type:"code",access_type:"offline",scope:"https://www.googleapis.com/auth/googlenow.publish",redirect_uri:"xhr",timestamp:b.timestamp,
signature:b.signature,signed_by:"google_now"},ob(a),c,!1)},W=function(a,b,c){G((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webAuthApiAnalytics",{origin:a.b,client_id:b,status:c},ob(a),function(){},!0)},ob=function(a){var b={},c=m.H(C.qb());if(c){a=a.b;if(!a||!c)throw Error("RP origin and session cookie value cannot be empty.");c=new U(new V,kb(c));a=kb(a);c.reset();c.update(a);c=c.digest();a=aa(c);jb("array"==a||"object"==a&&"number"==typeof c.length,"encodeByteArray takes an array as a parameter");
if(!lb)for(lb={},a=0;65>a;a++)lb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a);a=lb;for(var e=[],d=0;d<c.length;d+=3){var g=c[d],f=d+1<c.length,l=f?c[d+1]:0,p=d+2<c.length,u=p?c[d+2]:0,R=g>>2,g=(g&3)<<4|l>>4,l=(l&15)<<2|u>>6,u=u&63;p||(u=64,f||(l=64));e.push(a[R],a[g],a[l],a[u])}b["X-Csrf-Token"]=e.join("")}return b};var X=function(){};t(X,K);X.prototype.g=function(a){return["now_as",a.S,a.a||"ALL_CLIENTS"].join(C.i)};X.prototype.G=function(a){var b={};if(a){a=a.split(C.i);if("now_as"!==a[0]||3!=a.length)throw Error("Invalid assertion cache key.");b.S=a[1];b.a="ALL_CLIENTS"==a[2]?void 0:a[2]}return b};X.prototype.m=function(a,b){var c;(b=K.prototype.m.call(this,a,b))&&b.e&&(b.e<(new Date).getTime()?I(this).removeItem(this.g(a)):c=b.o);return c};
X.prototype.l=function(a,b,c){if(void 0!==b){var e=!!b;if(e&&!a.a)throw Error("Cannot cache all clients enabled for a user.");b={};b.o=e;b.e=(new Date).getTime()+864E5}K.prototype.l.call(this,a,b,c)};var sb=function(){};t(sb,J);sb.prototype.g=function(a){return["now_gs",a.origin,a.a].join(C.i)};sb.prototype.m=function(a,b){var c;(b=J.prototype.m.call(this,a,b))&&b.expires_at&&(b.expires_at<=(new Date).getTime()?I(this).removeItem(this.g(a)):(b.expires_at=void 0,c=b));return c};sb.prototype.l=function(a,b,c){b&&(b.expires_at=(new Date).getTime()+864E5);J.prototype.l.call(this,a,b,c)};S.prototype.mb=function(a){var b=this;if(!tb(this,"getCode",a.id)){var c=ub(this,a);3<c.oa.length?(Y(c,"THROTTLED","At most 3 email addresses can be used."),W(this.f,c.a,1)):c.aa?vb(this,c,!1,function(a){var d;try{d=wb(b,c,a)}catch(g){if("AUTH_EXISTS"==g.message){Y(c,"AUTHORIZATION_EXISTS","Authorization already granted for the user.");W(b.f,c.a,3);return}throw g;}d.length?xb(b,c,d,function(a){yb(b,c,a.auth_request)}):(Y(c,"DISABLED"),W(b.f,c.a,4))}):(Y(c,"DISABLED"),W(this.f,c.a,2))}};
S.prototype.Hb=function(a){var b=this;if(!tb(this,"revokeNow",a.id)){var c=ub(this,a);3<c.oa.length&&Y(c,"THROTTLED","At most 3 email addresses can be used.");c.aa?vb(this,c,!0,function(a){a=wb(b,c,a,!0);if(a.length)for(var d=a.length,e=0;e<a.length;e++)zb(b,c.a,a[e],function(a){(a=a&&a.access_token)?Fa(b.f,a,function(){d--;d||c.P({})}):(d--,d||c.P({}))});else c.P({})}):c.P({})}};
var tb=function(a,b,c){a.ua=a.ua||{};if(!a.ua[b])return a.ua[b]=!0,!1;P(a.c,c,{error:"THROTTLED",detail:"The "+b+"() method has already been invoked."});return!0},ub=function(a,b){var c=b.params||{},e={a:c.clientId,oa:c.emails,P:function(c){P(a.c,b.id,c)}};e.aa=F(a.v);e.Ua={origin:a.b,a:c.clientId};return e},vb=function(a,b,c,e){a.N||(a.N=new sb);if(!c&&(c=a.N.m(b.Ua,b.aa))){e(c);return}pb(a.f,{client_id:b.a,scope:"https://www.googleapis.com/auth/googlenow.publish"},function(c){c&&c.sessions?(a.N.l(b.Ua,
c,b.aa),e(c)):Y(b,"OTHER","Failed to get Google session information.")})},wb=function(a,b,c,e){a.L||(a.L=new X);var d=[];if(c.sessions)for(var g=0;g<c.sessions.length;g++){var f=c.sessions[g],l;if(l=f.emails)a:{l=b.oa;for(var p=f.emails,u=0;u<l.length;u++)for(var R=0;R<p.length;R++)if(l[u]&&p[R]&&l[u].toLowerCase()===p[R].toLowerCase()){l=!0;break a}l=!1}if(l)if(e)f.login_hint&&d.push(f.login_hint);else{if(f.login_hint)throw Error("AUTH_EXISTS");if(f.obfuscatedGaiaId){l=a.L;p=f.obfuscatedGaiaId;u=
{S:p,a:b.a};if(l=!1===l.m({S:p})?!1:l.m(u))throw Error("AUTH_EXISTS");void 0===l&&d.push(f.obfuscatedGaiaId)}}}return d},xb=function(a,b,c,e){a.L||(a.L=new X);qb(a.f,b.a,c,function(d){if(d&&"DISABLED"!=d.status)if("THROTTLED"==d.status)Y(b,"THROTTLED","Throttled by Google Now server."),W(a.f,b.a,7);else{var g;if(g="OK"==d.status)g=d.auth_request,g=!!g&&g.origin==a.b&&g.client_id==b.a&&0<g.timestamp&&!!g.signature&&"google_now"==g.signed_by&&0<=r(c,g.login_hint);if(g){g=a.L;var f=d.auth_request.login_hint,
l=b.a;g.l({S:f});g.l({S:f,a:l},!0);e(d)}else Y(b,"OTHER","Unexpected response from Google Now server."),W(a.f,b.a,8)}else{f=g=!1;if(d.users&&d.users.length)for(l=0;l<d.users.length;l++){var p=d.users[l];p.user_id&&(a.L.l({S:p.user_id,a:p.disabled_for_all_clients?void 0:b.a},!1),p.disabled_for_all_clients?f=!0:g=!0)}Y(b,"DISABLED");W(a.f,b.a,f&&!g?5:6)}})},yb=function(a,b,c){rb(a.f,c,function(c){c&&c.code?(b.P({code:c.code}),W(a.f,b.a,9)):c&&"immediate_failed"==c.error&&"policy_enforced"==c.error_subtype?
(Y(b,"AUTHORIZATION_EXISTS","Failed to issue code due to existing authorization."),W(a.f,b.a,10)):(Y(b,"OTHER",c.error||"Failed to get code."),W(a.f,b.a,11))})},zb=function(a,b,c,e){Da(a.f,{client_id:b,login_hint:c,response_type:"token",scope:"https://www.googleapis.com/auth/googlenow.publish"},e)},Y=function(a,b,c){a.P({error:b,detail:c})};S.prototype.nb=function(a){a=a&&a.params||{};var b=a.emails,b=b&&b.length&&"[object Array]"===Object.prototype.toString.call(b);return a.clientId&&!E(a.clientId)&&b};S.prototype.Ib=function(a){a=a&&a.params||{};var b=a.emails,b=b&&b.length&&"[object Array]"===Object.prototype.toString.call(b);return a.clientId&&!E(a.clientId)&&b};S.prototype.ma=function(){var a={rpcs:[],events:[]};Ab(this,a);return a};
var Ab=function(a,b){b.rpcs.push({method:"now:getCode",handler:T(a,a.mb),rpcIdRequired:!0,validator:T(a,a.nb)});b.rpcs.push({method:"now:revoke",handler:T(a,a.Hb),rpcIdRequired:!0,validator:T(a,a.Ib)})};S.prototype.ma=function(){var a={rpcs:[],events:[]};fb(this,a);Ab(this,a);return a};C.ja="APISID";C.Ha="SAPISID";C.Ja="/o/oauth2/iframerpc?action=sessionState";C.Ca="/o/oauth2/iframerpc?action=checkOrigin";C.Ga="/o/oauth2/iframerpc?action=issueToken";C.ia="/o/oauth2/iframerpc?action=listSessions";var Bb=function(){var a=ea("origin");if(!a)throw"Failed to get parent origin from URL hash!";var b=ea("rpcToken");if(!b)throw"Failed to get rpcToken from URL hash!";var c=ea("debug");ca="0"!=c&&!!c;(new S(a,b)).start()},Cb=["lso","startIdpIFrame"],Z=this;
Cb[0]in Z||!Z.execScript||Z.execScript("var "+Cb[0]);for(var Db;Cb.length&&(Db=Cb.shift());)Cb.length||void 0===Bb?Z=Z[Db]?Z[Db]:Z[Db]={}:Z[Db]=Bb;
